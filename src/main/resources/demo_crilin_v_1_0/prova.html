<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistiche Trading</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        canvas { max-width: 800px; margin: 20px auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
    <h1>Statistiche della Strategia di Trading</h1>
    
    <h2>Andamento del Bilancio</h2>
    <canvas id="balanceChart"></canvas>
    
    <h2>Statistiche</h2>
    <ul>
        <li>Saldo Iniziale: 1000.00</li>
        <li>Saldo Finale: 1213.59</li>
        <li>Variazione Percentuale Saldo: 21.00%</li>
        <li>Numero Ordini: 5</li>
        <li>Ordini in Profitto: 4</li>
        <li>Ordini in Perdita: 1</li>
        <li>Ordini Liquidati: 1</li>
        <li>Ordini Aperto: 0</li>
        <li>Percentuale Ordini in Profitto: 125.00%</li>
        <li>Percentuale Ordini in Perdita: 500.00%</li>
        <li>Percentuale Ordini Liquidati: 500.00%</li>
        <li>Durata Simulazione: 321414757 secondi</li>
    </ul>
    
    <h2>Elenco Ordini</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Tipo</th>
            <th>Stato</th>
            <th>Prezzo Apertura</th>
            <th>Prezzo Chiusura</th>
            <th>Leva</th>
            <th>Profit/Loss</th>
            <th>Durata (sec)</th>
        </tr>
        <tr>
            <td>1</td><td>BUY</td><td>LIQUIDATED</td><td>6468.89</td><td>3567.32</td><td>2</td><td>-22.55</td><td>10396495</td>
        </tr>
        <tr>
            <td>2</td><td>BUY</td><td>CLOSED_WITH_PROFIT</td><td>7050.54</td><td>12357.73</td><td>1</td><td>30.11</td><td>27216055</td>
        </tr>
        <tr>
            <td>3</td><td>SELL</td><td>CLOSED_WITH_LOSS</td><td>3782.99</td><td>3800.00</td><td>3</td><td>-0.67</td><td>259255</td>
        </tr>
        <tr>
            <td>4</td><td>BUY</td><td>CLOSED_WITH_PROFIT</td><td>3464.55</td><td>12357.73</td><td>1</td><td>256.69</td><td>13824055</td>
        </tr>
        <tr>
            <td>5</td><td>BUY</td><td>CLOSED_WITH_PROFIT</td><td>3464.83</td><td>12357.73</td><td>2</td><td>384.99</td><td>13478455</td>
        </tr>
    </table>
    
    <script>
        const events = [
            { time: "2018-08-08T15:54:04", balanceUpdate: -25.00 },
            { time: "2018-08-28T15:54:04", balanceUpdate: -40.00 },
            { time: "2018-12-06T23:48:59", balanceUpdate: 22.55 },
            { time: "2018-12-30T15:54:04", balanceUpdate: -50.00 },
            { time: "2019-01-02T15:54:59", balanceUpdate: 0.67 },
            { time: "2019-01-30T15:54:04", balanceUpdate: -100.00 },
            { time: "2019-02-03T15:54:04", balanceUpdate: -75.00 },
            { time: "2019-02-09T15:54:04", balanceUpdate: -150.00 },
            { time: "2019-03-09T15:54:59", balanceUpdate: 25.01 },
            { time: "2019-07-09T15:54:59", balanceUpdate: 256.69 }
        ];

        let balance = 1000;
        const labels = [];
        const data = [];
        
        events.sort((a, b) => new Date(a.time) - new Date(b.time));
        events.forEach(event => {
            balance += event.balanceUpdate;
            labels.push(event.time.split('T')[0]);
            data.push(balance);
        });

        new Chart(document.getElementById('balanceChart'), {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{ label: 'Bilancio', data: data, borderColor: 'blue', fill: false }]
            }
        });
    </script>
</body>
</html>
